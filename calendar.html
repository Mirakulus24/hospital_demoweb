<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FC Sync - Live Scheduler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .tab-active { background: white; color: #1e3a8a; shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        @media (max-width: 1024px) {
            .view-section { display: none; }
            .view-section.active { display: block; }
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen">

    <div class="max-w-5xl mx-auto p-4 lg:p-10">
        <div class="text-center mb-6 lg:mb-10">
            <h1 class="text-2xl lg:text-3xl font-bold text-blue-900 tracking-tight">Live Schedule Sync</h1>
            <p class="text-gray-500 italic text-xs lg:text-sm">"Efficiency at the gate, Healing at the ward."</p>
        </div>

        <div class="lg:hidden flex bg-slate-200 p-1 rounded-2xl mb-6">
            <button onclick="switchView('patient')" id="tab-patient" class="flex-1 py-3 rounded-xl text-sm font-bold transition-all tab-active">
                <i class="fas fa-calendar-plus mr-2"></i>Patient Book
            </button>
            <button onclick="switchView('admin')" id="tab-admin" class="flex-1 py-3 rounded-xl text-sm font-bold transition-all text-slate-500">
                <i class="fas fa-stream mr-2"></i>Admin Feed
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-10">
            
            <div id="patient-view" class="view-section active bg-white rounded-[2.5rem] shadow-xl overflow-hidden border border-blue-50">
                <div class="bg-blue-600 p-6 text-white flex justify-between items-center">
                    <div>
                        <p class="text-[10px] uppercase font-bold opacity-70 tracking-widest">Appointment Booking</p>
                        <h2 class="text-xl font-bold tracking-tight">Select a Specialist</h2>
                    </div>
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-user-md"></i>
                    </div>
                </div>
                
                <div class="p-6 lg:p-8 space-y-6">
                    <div>
                        <label class="block text-xs font-black text-gray-400 uppercase mb-2 ml-1">Specialty Department</label>
                        <select id="deptSelect" class="w-full p-4 bg-slate-50 border-none rounded-2xl outline-none focus:ring-2 focus:ring-blue-500 font-semibold text-gray-700 appearance-none">
                            <option>Antenatal Clinic</option>
                            <option>General Surgery</option>
                            <option>Pediatrics</option>
                            <option>Infertility Specialist</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-xs font-black text-gray-400 uppercase mb-2 ml-1">Available Today</label>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="syncAppointment('10:00 AM')" class="p-4 bg-blue-50 border border-blue-100 rounded-2xl hover:bg-blue-600 hover:text-white transition-all font-bold text-blue-700">10:00 AM</button>
                            <button onclick="syncAppointment('01:30 PM')" class="p-4 bg-blue-50 border border-blue-100 rounded-2xl hover:bg-blue-600 hover:text-white transition-all font-bold text-blue-700">01:30 PM</button>
                        </div>
                    </div>

                    <div id="patientStatus" class="hidden animate-pulse bg-green-50 text-green-700 p-5 rounded-2xl text-center font-bold text-sm border border-green-100">
                        <i class="fas fa-check-circle mr-2 text-lg"></i> Request Pushed to Admin!
                    </div>
                </div>
            </div>

            <div id="admin-view" class="view-section bg-slate-900 rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-800">
                <div class="bg-slate-800 p-6 text-white flex justify-between items-center">
                    <div>
                        <p class="text-[10px] uppercase font-bold text-blue-400 tracking-widest">Admin Control</p>
                        <h2 class="text-xl font-bold tracking-tight">Live Sync Feed</h2>
                    </div>
                    <span class="flex items-center text-[10px] font-black bg-green-950 text-green-400 px-3 py-1 rounded-full border border-green-900">
                        <i class="fas fa-circle mr-2 animate-pulse text-[8px]"></i> LIVE
                    </span>
                </div>

                <div class="p-6 lg:p-8">
                    <div id="adminSchedule" class="space-y-4">
                        <div class="flex items-center justify-between bg-slate-800/50 p-4 rounded-2xl border border-slate-700/50">
                            <div class="flex items-center space-x-4">
                                <div class="text-blue-400 font-black text-sm">09:00</div>
                                <div>
                                    <p class="text-white font-bold text-sm">John Doe</p>
                                    <p class="text-slate-500 text-[9px] uppercase font-bold">General Checkup</p>
                                </div>
                            </div>
                            <span class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Completed</span>
                        </div>

                        <div id="syncedSlot" class="hidden flex items-center justify-between bg-blue-600 p-4 rounded-2xl border-2 border-blue-400 shadow-xl shadow-blue-900/40">
                            <div class="flex items-center space-x-4">
                                <div id="syncTime" class="text-white font-black text-sm">--:--</div>
                                <div>
                                    <p class="text-white font-bold text-sm">Amina Bello</p>
                                    <p id="syncDept" class="text-blue-100 text-[9px] uppercase font-bold tracking-tighter">--</p>
                                </div>
                            </div>
                            <button onclick="approveRequest()" class="bg-white text-blue-600 px-4 py-2 rounded-xl font-black text-[10px] hover:bg-blue-50 transition-colors shadow-sm">APPROVE</button>
                        </div>
                    </div>
                    
                    <p class="text-center text-slate-600 text-[10px] mt-8 font-medium">End of Live Schedule</p>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Patient ID to match the Dashboard
const PATIENT_ID = "FC-2026-001";

function switchView(view) {
    document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
    document.getElementById(view + '-view').classList.add('active');
    
    document.getElementById('tab-patient').classList.remove('tab-active', 'text-slate-500');
    document.getElementById('tab-admin').classList.remove('tab-active', 'text-slate-500');
    
    document.getElementById('tab-' + view).classList.add('tab-active');
}

function syncAppointment(time) {
    const dept = document.getElementById('deptSelect').value;
    document.getElementById('patientStatus').classList.remove('hidden');
    
    // Update Admin View
    document.getElementById('syncTime').innerText = time;
    document.getElementById('syncDept').innerText = dept;
    document.getElementById('syncedSlot').classList.remove('hidden');

    if (window.innerWidth < 1024) {
        setTimeout(() => switchView('admin'), 1000);
    }
}

function approveRequest() {
    const time = document.getElementById('syncTime').innerText;
    const dept = document.getElementById('syncDept').innerText;
    const btn = event.currentTarget;

    // 1. Visual Feedback on Admin Side
    btn.innerHTML = '<i class="fas fa-spinner animate-spin"></i>';
    
    setTimeout(() => {
        // 2. Data Integration: Save to Patient History
        const newAppointment = {
            id: Date.now(),
            service: `Scheduled: ${dept}`,
            doctor: "System Auto-Sync",
            date: `Today at ${time}`,
            note: "Confirmed Appointment. Please arrive 15 minutes early at the reception desk."
        };

        // Get existing history, add new, and save
        let history = JSON.parse(localStorage.getItem(`history_${PATIENT_ID}`)) || [];
        history.push(newAppointment);
        localStorage.setItem(`history_${PATIENT_ID}`, JSON.stringify(history));

        // 3. UI Update
        const slot = document.getElementById('syncedSlot');
        slot.classList.replace('bg-blue-600', 'bg-slate-800/50');
        slot.classList.replace('border-blue-400', 'border-slate-700/50');
        btn.innerHTML = '<i class="fas fa-check"></i> CONFIRMED';
        btn.classList.replace('text-blue-600', 'text-green-500');
        
        alert("Synced! Sarah O. can now see this in her Patient Portal.");
    }, 1200);
}
    </script>
</body>
</html>